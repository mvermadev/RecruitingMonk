{"ast":null,"code":"import Swal from 'sweetalert2';\nimport { ADD_PROFILE } from '../constants/index';\n\nconst Logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('username');\n  window.location.reload();\n};\n\nexport const fetchProfile = () => dispatch => {\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", localStorage.token);\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  var raw = JSON.stringify({\n    \"username\": localStorage.username\n  });\n  var requestOptions = {\n    method: 'POST',\n    headers: myHeaders,\n    body: raw,\n    redirect: 'follow'\n  };\n  return fetch(\"https://recmonk.herokuapp.com/profile\", requestOptions).then(response => {\n    if (response.ok) {\n      return response;\n    } else {\n      var error = new Error(\"Error \" + response.status + \": \" + response.statusText);\n      if (response.status == 401) logout();\n      error.response = response;\n      throw error;\n    }\n  }, error => {\n    var errmess = new Error(error.message);\n    throw errmess;\n  }).then(response => response.json()).then(data => {\n    dispatch(addProfile(data));\n  }).catch(error => console.log(error.message));\n};\nexport const addProfile = data => ({\n  type: ADD_PROFILE,\n  payload: data\n});","map":{"version":3,"sources":["/home/jt/Documents/Monk Works/RecruitingMonk/F-End/src/redux/dataFetchers/ProfileApi.js"],"names":["Swal","ADD_PROFILE","Logout","localStorage","removeItem","window","location","reload","fetchProfile","dispatch","myHeaders","Headers","append","token","raw","JSON","stringify","username","requestOptions","method","headers","body","redirect","fetch","then","response","ok","error","Error","status","statusText","logout","errmess","message","json","data","addProfile","catch","console","log","type","payload"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,aAAjB;AACA,SAASC,WAAT,QAA4B,oBAA5B;;AAEA,MAAMC,MAAM,GAAC,MAAI;AACbC,EAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,EAAAA,YAAY,CAACC,UAAb,CAAwB,UAAxB;AACAC,EAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,CAJD;;AAMA,OAAO,MAAMC,YAAY,GAAG,MAAOC,QAAD,IAAc;AAE5C,MAAIC,SAAS,GAAG,IAAIC,OAAJ,EAAhB;AACAD,EAAAA,SAAS,CAACE,MAAV,CAAiB,eAAjB,EAAkCT,YAAY,CAACU,KAA/C;AACAH,EAAAA,SAAS,CAACE,MAAV,CAAiB,cAAjB,EAAiC,kBAAjC;AAEA,MAAIE,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AAAC,gBAAWb,YAAY,CAACc;AAAzB,GAAf,CAAV;AAEA,MAAIC,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAEV,SAFU;AAGnBW,IAAAA,IAAI,EAAEP,GAHa;AAInBQ,IAAAA,QAAQ,EAAE;AAJS,GAArB;AAOA,SAAOC,KAAK,CAAC,uCAAD,EAA0CL,cAA1C,CAAL,CACFM,IADE,CACGC,QAAQ,IAAI;AACd,QAAGA,QAAQ,CAACC,EAAZ,EAAgB;AACZ,aAAOD,QAAP;AACH,KAFD,MAGK;AACD,UAAIE,KAAK,GAAG,IAAIC,KAAJ,CAAU,WAAWH,QAAQ,CAACI,MAApB,GAA6B,IAA7B,GAAoCJ,QAAQ,CAACK,UAAvD,CAAZ;AACA,UAAGL,QAAQ,CAACI,MAAT,IAAmB,GAAtB,EACIE,MAAM;AACVJ,MAAAA,KAAK,CAACF,QAAN,GAAiBA,QAAjB;AACA,YAAME,KAAN;AACH;AACJ,GAZE,EAaHA,KAAK,IAAI;AACL,QAAIK,OAAO,GAAG,IAAIJ,KAAJ,CAAUD,KAAK,CAACM,OAAhB,CAAd;AACA,UAAMD,OAAN;AACH,GAhBE,EAiBFR,IAjBE,CAiBGC,QAAQ,IAAIA,QAAQ,CAACS,IAAT,EAjBf,EAkBFV,IAlBE,CAkBGW,IAAI,IAAI;AACV1B,IAAAA,QAAQ,CAAC2B,UAAU,CAACD,IAAD,CAAX,CAAR;AACH,GApBE,EAqBFE,KArBE,CAqBIV,KAAK,IAAIW,OAAO,CAACC,GAAR,CAAYZ,KAAK,CAACM,OAAlB,CArBb,CAAP;AAuBH,CAtCM;AAwCP,OAAO,MAAMG,UAAU,GAAID,IAAD,KAAW;AACjCK,EAAAA,IAAI,EAAEvC,WAD2B;AAEjCwC,EAAAA,OAAO,EAAEN;AAFwB,CAAX,CAAnB","sourcesContent":["import Swal from 'sweetalert2'\nimport { ADD_PROFILE } from '../constants/index'\n\nconst Logout=()=>{\n    localStorage.removeItem('token');\n    localStorage.removeItem('username');\n    window.location.reload();\n}\n\nexport const fetchProfile = () => (dispatch) => {\n\n    var myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", localStorage.token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    var raw = JSON.stringify({\"username\":localStorage.username});\n\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n\n    return fetch(\"https://recmonk.herokuapp.com/profile\", requestOptions)\n        .then(response => {\n            if(response.ok) {\n                return response;\n            }\n            else {\n                var error = new Error(\"Error \" + response.status + \": \" + response.statusText);\n                if(response.status == 401) \n                    logout();\n                error.response = response;\n                throw error;\n            }\n        }, \n        error => {\n            var errmess = new Error(error.message);\n            throw errmess;\n        })\n        .then(response => response.json())\n        .then(data => {\n            dispatch(addProfile(data))\n        })\n        .catch(error => console.log(error.message));\n\n}\n\nexport const addProfile = (data) => ({\n    type: ADD_PROFILE,\n    payload: data\n});"]},"metadata":{},"sourceType":"module"}